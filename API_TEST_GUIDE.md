# Glass Per Hour API ν…μ¤νΈ κ°€μ΄λ“ (v2 - In-Memory)

## π“ λ©μ°¨
1. [Postman μ„¤μ •](#postman-μ„¤μ •)
2. [ν…μ¤νΈ μ‹λ‚λ¦¬μ¤](#ν…μ¤νΈ-μ‹λ‚λ¦¬μ¤)
3. [μ£Όμ” κ°λ…](#μ£Όμ”-κ°λ…)

---

## Postman μ„¤μ •

### 1. Postman μ„¤μΉ
- [Postman λ‹¤μ΄λ΅λ“](https://www.postman.com/downloads/)

### 2. μ»¬λ ‰μ… Import
1. Postman μ‹¤ν–‰
2. μΆμΈ΅ μƒλ‹¨ "Import" λ²„νΌ ν΄λ¦­
3. `postman/glass-per-hour.postman_collection.json` νμΌ μ„ νƒ
4. μ»¬λ ‰μ…μ΄ μλ™μΌλ΅ λ΅λ“λ¨ (μμ • μμ •)

### 3. ν™κ²½ λ³€μ ν™•μΈ
μ»¬λ ‰μ…μ Variables νƒ­μ—μ„ λ‹¤μ λ³€μλ“¤μ΄ μ„¤μ •λμ–΄ μλ”μ§€ ν™•μΈ:
- `baseUrl`: `http://localhost:8000`
- `userId`: (API νΈμ¶ ν›„ μλ™ μ„¤μ •λ¨)

---

## ν…μ¤νΈ μ‹λ‚λ¦¬μ¤

### κΈ°λ³Έ Flow ν…μ¤νΈ

#### 1. μ‚¬μ©μ μƒμ„±
- `POST /api/users` μ”μ²­μ„ μ‹¤ν–‰ν•©λ‹λ‹¤.
- **Body:**
  ```json
  {
    "userName": "ν…μ¤ν„°"
  }
  ```
- **μ‘λ‹µ ν™•μΈ:**
  - μ‘λ‹µμΌλ΅ λ°›μ€ `User` κ°μ²΄μ—μ„ `id` κ°’μ„ λ³µμ‚¬ν•μ—¬ Postman ν™κ²½ λ³€μ `userId`μ— μ €μ¥ν•©λ‹λ‹¤.

#### 2. μ£Όλ‰ κΈ°λ΅ (λ°λ³µ)
- `POST /api/users/{userId}/drinks` μ”μ²­μ„ μ‹¤ν–‰ν•©λ‹λ‹¤.
- `{userId}`λ” μ΄μ „ λ‹¨κ³„μ—μ„ μ €μ¥ν• κ°’μΌλ΅ μλ™ μΉν™λ©λ‹λ‹¤.
- **Body:**
  ```json
  {
    "drinkType": "SOJU",
    "glassCount": 2
  }
  ```
- μ—¬λ¬ μΆ…λ¥μ μ λ΅ λ°λ³µν•΄μ„ ν…μ¤νΈν•©λ‹λ‹¤.

#### 3. λ°μ‘ μ†λ„ κΈ°λ΅ (μ„ νƒ)
- `POST /api/users/{userId}/reaction` μ”μ²­μ„ μ‹¤ν–‰ν•©λ‹λ‹¤.
- **Body:**
  ```json
  {
    "reactionTimeMs": 350
  }
  ```

#### 4. μ „μ²΄ λ­ν‚Ή ν™•μΈ
- `GET /api/rankings` μ”μ²­μ„ μ‹¤ν–‰ν•©λ‹λ‹¤.
- μ‘λ‹µμΌλ΅ μ¤λ” `List<User>` μ—μ„ λ°©κΈ κΈ°λ΅ν• μ‚¬μ©μμ `totalSojuEquivalent` κ°’μ΄ μ¬λ°”λ¥΄κ² λ°μλμ—λ”μ§€ ν™•μΈν•©λ‹λ‹¤.

#### 5. μΈ΅μ • μΆ…λ£
- `POST /api/users/{userId}/finish` μ”μ²­μ„ μ‹¤ν–‰ν•©λ‹λ‹¤.
- **μ‘λ‹µ ν™•μΈ:**
  - `finishedAt` ν•„λ“κ°€ ν„μ¬ μ‹κ°„μΌλ΅ μ±„μ›μ§€κ³ , `characterLevel`μ΄ κ³„μ‚°λμ—λ”μ§€ ν™•μΈν•©λ‹λ‹¤.
  - `aiMessage` ν•„λ“λ” "AI λ¶„μ„ μ¤‘..." λλ” `null`μΌ μ μμµλ‹λ‹¤.

#### 6. AI λ©”μ‹μ§€ ν™•μΈ (ν΄λ§)
- `GET /api/users/{userId}/ai-message` μ”μ²­μ„ λ‡ μ΄ κ°„κ²©μΌλ΅ λ°λ³µ μ‹¤ν–‰ν•©λ‹λ‹¤.
- **μ‘λ‹µ ν™•μΈ:**
  - `aiMessage` ν•„λ“μ— AIκ°€ μƒμ„±ν• λ¶„μ„ λ©”μ‹μ§€κ°€ μ±„μ›μ§€λ”μ§€ ν™•μΈν•©λ‹λ‹¤.

---

## μ£Όμ” κ°λ…

### μ†μ£Ό ν™μ‚°λ‰
λ¨λ“  μ μ€ μ†μ£Ό κΈ°μ¤€μΌλ΅ ν™μ‚°λμ–΄ κ³„μ‚°λ©λ‹λ‹¤.
- μ†μ£Ό 1μ” (50ml, 17%) = 1.0
- λ§¥μ£Ό 1μ” (500ml, 4.5%) = 0.3
- μ†λ§¥ 1μ” = 0.65
- λ§‰κ±Έλ¦¬ 1μ” (300ml, 6%) = 0.4
- κ³ΌμΌμ†μ£Ό 1μ” (13%) = 0.7

### μ‹μ† μ” κ³„μ‚°
```
μ‹μ† μ” = μ΄ μ†μ£Ό ν™μ‚°λ‰ / κ²½κ³Ό μ‹κ°„(μ‹κ°„)
```
- μ΄ κ°’μ€ μΊλ¦­ν„° λ λ²¨μ„ κ²°μ •ν•λ” λ° μ‚¬μ©λ©λ‹λ‹¤.

### λ­ν‚Ή
- λ­ν‚Ήμ€ μ¤μ§ `totalSojuEquivalent` (μ΄ μ†μ£Ό ν™μ‚°λ‰)μ„ κΈ°μ¤€μΌλ΅ λ‚΄λ¦Όμ°¨μ μ •λ ¬λ©λ‹λ‹¤.

---

## π’΅ ν

### Postman μ‚¬μ© ν
1. **λ³€μ ν™μ©**: `userId`λ¥Ό ν™κ²½ λ³€μλ΅ μ €μ¥ν•΄λ‘λ©΄ μ—¬λ¬ μ”μ²­μ—μ„ νΈλ¦¬ν•κ² μ‚¬μ©ν•  μ μμµλ‹λ‹¤.
2. **μμ°¨ μ‹¤ν–‰**: Runnerλ¥Ό μ‚¬μ©ν•λ©΄ μ „μ²΄ μ‹λ‚λ¦¬μ¤λ¥Ό μλ™μΌλ΅ μ‹¤ν–‰ν•λ©° API λ™μ‘μ„ κ²€μ¦ν•  μ μμµλ‹λ‹¤.

### λ””λ²„κΉ…
- λ°±μ—”λ“ μ„λ²„μ μ½μ†” λ΅κ·Έλ¥Ό ν™•μΈν•μ—¬ API νΈμ¶ μ‹ μ–΄λ–¤ μΌμ΄ μΌμ–΄λ‚λ”μ§€ μ‹¤μ‹κ°„μΌλ΅ λ³Ό μ μμµλ‹λ‹¤.
- Postmanμ Response νƒ­μ—μ„ API μ‘λ‹µμ μƒμ„Έ μ •λ³΄λ¥Ό ν™•μΈν•  μ μμµλ‹λ‹¤.
